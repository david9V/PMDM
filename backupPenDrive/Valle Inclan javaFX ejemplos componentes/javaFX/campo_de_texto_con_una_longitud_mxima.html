<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>Campo de texto con una longitud máxima | JavaFX </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="José Ramón Jiménez Reyes" />
<meta name="generator" content="eXeLearning 2.1 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript">$exe_i18n={previous:"Anterior",next:"Siguiente",show:"Mostrar",hide:"Ocultar",showFeedback:"Mostrar retroalimentación",hideFeedback:"Ocultar retroalimentación",correct:"Correcto",incorrect:"Incorrecto",menu:"Menú",print:"Imprimir"}</script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" /></head>
<body class="exe-web-site"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header" ><div id="headerContent">JavaFX</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">JavaFX</a></li>
   <li><a href="diseo_de_interfaces.html" class="daddy">Diseño de interfaces</a>
   <ul class="other-section">
      <li><a href="controles.html" class="daddy">Controles</a>
      <ul class="other-section">
         <li><a href="etiquetas.html" class="no-ch">Etiquetas</a></li>
         <li><a href="hiperenlaces.html" class="no-ch">Hiperenlaces</a></li>
         <li><a href="campos_de_texto.html" class="no-ch">Campos de texto</a></li>
         <li><a href="campos_de_contrasea.html" class="no-ch">Campos de contraseña</a></li>
         <li><a href="botones.html" class="no-ch">Botones</a></li>
         <li><a href="botones_de_activacin.html" class="no-ch">Botones de activación</a></li>
         <li><a href="radio_botones.html" class="no-ch">Radio botones</a></li>
         <li><a href="casillas_de_verificacin.html" class="no-ch">Casillas de verificación</a></li>
         <li><a href="cajas_de_eleccin.html" class="no-ch">Cajas de elección</a></li>
         <li><a href="cajas_combinadas.html" class="no-ch">Cajas combinadas</a></li>
         <li><a href="separador.html" class="no-ch">Separador</a></li>
         <li><a href="barras_de_desplazamiento_y_paneles_de_desplazamiento.html" class="no-ch">Barras de desplazamiento y paneles de desplazamiento</a></li>
         <li><a href="deslizador.html" class="no-ch">Deslizador</a></li>
         <li><a href="barras_e_indicadores_de_progreso.html" class="no-ch">Barras e indicadores de progreso</a></li>
         <li><a href="vista_de_lista.html" class="no-ch">Vista de lista</a></li>
         <li><a href="vista_de_tabla.html" class="no-ch">Vista de tabla</a></li>
         <li><a href="vista_de_rbol.html" class="no-ch">Vista de árbol</a></li>
         <li><a href="vista_de_tabla_en_rbol.html" class="no-ch">Vista de tabla en árbol</a></li>
         <li><a href="editor_html.html" class="no-ch">Editor HTML</a></li>
         <li><a href="informacin_contextual.html" class="no-ch">Información contextual</a></li>
         <li><a href="mens.html" class="no-ch">Menús</a></li>
         <li><a href="paneles_con_ttulo_y_acordeones.html" class="no-ch">Paneles con título y acordeones</a></li>
         <li><a href="paginacin.html" class="no-ch">Paginación</a></li>
         <li><a href="selector_de_color.html" class="no-ch">Selector de color</a></li>
         <li><a href="selector_de_fecha.html" class="no-ch">Selector de fecha</a></li>
         <li><a href="selector_de_ficheros.html" class="no-ch">Selector de ficheros</a></li>
      </ul>
      </li>
      <li><a href="paneles_de_diseo.html" class="no-ch">Paneles de diseño</a></li>
      <li><a href="personalizacin_de_interfaces.html" class="no-ch">Personalización de interfaces</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="interaccionando_con_el_usuario.html" class="current-page-parent daddy">Interaccionando con el usuario</a>
   <ul>
      <li><a href="contador_de_pulsaciones.html" class="no-ch">Contador de pulsaciones</a></li>
      <li><a href="qu_botn_hemos_pulsado.html" class="no-ch">¿Qué botón hemos pulsado?</a></li>
      <li id="active"><a href="campo_de_texto_con_una_longitud_mxima.html" class="active no-ch">Campo de texto con una longitud máxima</a></li>
      <li><a href="campo_de_texto_numrico.html" class="no-ch">Campo de texto numérico</a></li>
      <li><a href="qu_radio_botn_hemos_seleccionado.html" class="no-ch">¿Qué radio botón hemos seleccionado?</a></li>
      <li><a href="qu_opcin_hemos_escojido_de_una_caja_de_eleccin.html" class="no-ch">¿Qué opción hemos escojido de una caja de elección?</a></li>
      <li><a href="elige_las_imgenes_a_mostrar.html" class="no-ch">Elige las imágenes a mostrar</a></li>
      <li><a href="posicin_del_ratn.html" class="no-ch">Posición del ratón</a></li>
      <li><a href="cmo_cambia_el_valor_de_un_deslizador.html" class="no-ch">¿Cómo cambia el valor de un deslizador?</a></li>
      <li><a href="interaccionando_con_una_lista.html" class="no-ch">Interaccionando con una lista</a></li>
      <li><a href="mostrando_dilogos.html" class="no-ch">Mostrando diálogos</a></li>
      <li><a href="trabajando_con_tablas.html" class="no-ch">Trabajando con tablas</a></li>
   </ul>
   </li>
   <li><a href="jxml.html" class="daddy">JXML</a>
   <ul class="other-section">
      <li><a href="scenebuilder.html" class="no-ch">SceneBuilder</a></li>
   </ul>
   </li>
   <li><a href="cdigo_de_los_ejemplos.html" class="no-ch">Código de los ejemplos</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="qu_botn_hemos_pulsado.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="campo_de_texto_numrico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">Campo de texto con una longitud máxima</h1></div>
<div class="iDevice_wrapper FreeTextfpdIdevice" id="id36">
<div class="iDevice emphasis0">
<div id="ta36_154" class="block iDevice_content">
<p>En este ejemplo os he querido mostrar una tarea muy habitual en una aplicación que es restringir el número máximo de caracteres que se introducen en un campo de texto.</p>
<p>Para ello os voy a dejar dos soluciones para la misma tarea:</p>
<ul>
<li>La primera hace uso del método <strong>setOnKeyTyped</strong> para registrar un manejador para el evento producido cuando una tecla se ha pulsado (y se ha dejado de pulsar posteriormente) para el campo de texto. Como curiosidad, podéis ver en el código que si se ha alcanzado el tamaño máximo establecido lo que se hace en el manejador es consumir el evento y no hacer nada con él (bueno, lanzo un pitido para indicar al usuario que algo no va bien) y así el carácter asociado a la tecla no es añadido al campo de texto ya que no permitimos que se propague en la cadena de propagación del evento.</li>
<li>La segunda hace uso del método <strong>addListener</strong> de la propiedad de texto asociada al campo de texto y que nos permitirá escuchar los cambios que se vayan produciendo en la misma, de forma que si el nuevo valor ya sobrepasa el tamaño lo sustituimos por el antiguo.</li>
</ul>
<p>La interfaz de la aplicación es el que muestra la siguiente imagen:</p>
<p><img src="Captura_de_pantalla_de_2018-04-15_18-35-10.png" style="display: block; margin-left: auto; margin-right: auto;" width="450" height="186" /></p>
<p>El código asociado a ambas soluciones os lo muestro a continuación.</p>
<h2 style="text-align: center;">CampoTextoLongitudMaxima1.java</h2>
<div class="highlighted-code language-java">
<div>
<pre><code>package javafx.eventos;

import java.awt.Toolkit;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;

public class CampoTextoLongitudMaxima1 extends Application {
	
	private Label lbTexto, lbInfo;
	private TextField tfTexto;
	private final int MAX_CARACTERES = 10;
	
	private void controlaTamanoTexto(KeyEvent e) {
		String texto = tfTexto.getText();
		int longitud = texto.length();
		if (longitud &lt; MAX_CARACTERES) {
			longitud = (Character.isISOControl(e.getCharacter().charAt(0)) ? longitud : longitud + 1);
			lbInfo.setText("Longitud: " + longitud + " caracteres");
		}
		else {
			e.consume();
			Toolkit.getDefaultToolkit().beep();
		}
	}

	@Override
	public void start(Stage escenarioPrincipal) {
		try {
			VBox raiz = new VBox(20);
			raiz.setPadding(new Insets(10));
			raiz.setAlignment(Pos.CENTER);
			
			HBox hbTexto =new HBox(30);
			hbTexto.setPadding(new Insets(10));
			hbTexto.setAlignment(Pos.CENTER);
			
			lbTexto = new Label("Introduce texto \n(máximo " + MAX_CARACTERES + " caracteres)");
			lbTexto.setWrapText(true);
			lbTexto.setFont(Font.font("Arial", 14));
			tfTexto = new TextField();
			tfTexto.setOnKeyTyped(e -&gt; controlaTamanoTexto(e));
			hbTexto.getChildren().addAll(lbTexto, tfTexto);
			
			lbInfo = new Label("Longitud: 0 caracteres");
			lbInfo.setFont(Font.font("Arial", 24));
			
			raiz.getChildren().addAll(hbTexto, lbInfo);
			
			Scene escena = new Scene(raiz, 450, 150);
			escenarioPrincipal.setTitle("Texto con tamaño máximo");
			escenarioPrincipal.setScene(escena);
			escenarioPrincipal.show();
		} catch(Exception e) {
			e.printStackTrace();
		}
	}

	public static void main(String[] args) {
		launch(args);
	}
}</code></pre>
</div>
</div>
<h2 style="text-align: center;">CampoTextoLongitudMaxima2.java</h2>
<div class="highlighted-code language-java">
<div>
<pre><code>package javafx.eventos;

import java.awt.Toolkit;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;

public class CampoTextoLongitudMaxima2 extends Application {
	
	private Label lbTexto, lbInfo;
	private TextField tfTexto;
	private final int MAX_CARACTERES = 10;
	
	private void controlaTamanoTexto(String oldValue) {
		String texto = tfTexto.getText();
		if (texto.length() &lt;= MAX_CARACTERES) {
			lbInfo.setText("Longitud: " + texto.length() + " caracteres");
		}
		else {
			tfTexto.setText(oldValue);
			Toolkit.getDefaultToolkit().beep();
		}
	}

	@Override
	public void start(Stage escenarioPrincipal) {
		try {
			VBox raiz = new VBox(20);
			raiz.setPadding(new Insets(10));
			raiz.setAlignment(Pos.CENTER);
			
			HBox hbTexto =new HBox(30);
			hbTexto.setPadding(new Insets(10));
			hbTexto.setAlignment(Pos.CENTER);
			
			lbTexto = new Label("Introduce texto \n(máximo " + MAX_CARACTERES + " caracteres)");
			lbTexto.setWrapText(true);
			lbTexto.setFont(Font.font("Arial", 14));
			tfTexto = new TextField();
			tfTexto.textProperty().addListener((observable, oldValue, newValue) -&gt; controlaTamanoTexto(oldValue));
			hbTexto.getChildren().addAll(lbTexto, tfTexto);
			
			lbInfo = new Label("Longitud: 0 caracteres");
			lbInfo.setFont(Font.font("Arial", 24));
			
			raiz.getChildren().addAll(hbTexto, lbInfo);
			
			Scene escena = new Scene(raiz, 450, 150);
			escenarioPrincipal.setTitle("Texto con tamaño máximo");
			escenarioPrincipal.setScene(escena);
			escenarioPrincipal.show();
		} catch(Exception e) {
			e.printStackTrace();
		}
	}

	public static void main(String[] args) {
		launch(args);
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="qu_botn_hemos_pulsado.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="campo_de_texto_numrico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="siteFooter"><p style="text-align: center; font-size: large;">CC by-nc - <strong>José Ramón Jiménez Reyes </strong>- IES Al-Ándalus</p></div></div>
<script type="text/javascript" src="_fpd_js.js"></script></body></html>